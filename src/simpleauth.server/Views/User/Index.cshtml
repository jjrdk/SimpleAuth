@using System.Linq
@using System.Security.Claims

@{
    ViewBag.IsEditDisplayed = false;
    ViewBag.IsConsentDisplayed = false;
    ViewBag.IsIndexDisplayed = true;
    ViewBag.IsProfileDisplayed = false;
    var identity = User.Identity as ClaimsIdentity;
    var nameClaim = identity.Claims.FirstOrDefault(c => c.Type == "name");
    var givenNameClaim = identity.Claims.FirstOrDefault(c => c.Type == "given_name");
    var familyNameClaim = identity.Claims.FirstOrDefault(c => c.Type == "family_name");
    var pictureClaim = identity.Claims.FirstOrDefault(c => c.Type == "picture");
    var roles = identity.Claims.Where(c => c.Type == "role").Select(c => c.Value).ToList();
    var name = nameClaim == null ? "Unknown" : nameClaim.Value;
    var givenName = givenNameClaim == null ? " - " : givenNameClaim.Value;
    var familyName = familyNameClaim == null ? " - " : familyNameClaim.Value;
    var picture = pictureClaim == null ? Url.Content("~/img/Unknown.png") : pictureClaim.Value;
}

<!-- Display the information -->

<h4 class="header col s12">Information</h4>
<div class="col s12">
    <div class="card horizontal hide-on-small-only">
        <div class="card-image">
            <img src="@picture" alt="Picture" class="img-thumbnail" />
        </div>
        <div class="card-stacked">
            <div class="card-content">
                <table>
                    <tbody>
                    <tr>
                        <td><strong>Name</strong></td>
                        <td>@name</td>
                    </tr>
                    <tr>
                        <td><strong>First name</strong></td>
                        <td>@givenName</td>
                    </tr>
                    <tr>
                        <td><strong>Last name</strong></td>
                        <td>@familyName</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="card  hide-on-med-and-up">
        <div class="card-image">
            <img src="@picture" alt="Picture" class="img-thumbnail" />
        </div>
        <div class="card-content">
            <table>
                <tbody>
                <tr>
                    <td><strong>Name</strong></td>
                    <td>@name</td>
                </tr>
                <tr>
                    <td><strong>First name</strong></td>
                    <td>@givenName</td>
                </tr>
                <tr>
                    <td><strong>Last name</strong></td>
                    <td>@familyName</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>